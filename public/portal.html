<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Codex Hermético</title>
</head>
<body>
  <h1>Bienvenido al Codex Hermético</h1>
  <p>ID de experiencia: <span id="id"></span></p>
  <div id="info"></div>

  <script>
    const experienceId = window.location.pathname.split("/").pop();
    document.getElementById("id").innerText = experienceId;

    fetch(`/api/experience?experienceId=${experienceId}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById("info").innerHTML = `
          <p><strong>Nombre:</strong> ${data.membership.user.firstName || "Sin nombre"}</p>
          <p><strong>Email:</strong> ${data.membership.user.email}</p>
        `;
      })
      .catch(err => {
        console.error("Error al obtener datos de Whop:", err);
      });
  </script>
</body>
</html>
